[workspace]
name = "concorde-pipeline"
version = "1.0.0"
description = "NGS Variant Validation Pipeline"
channels = ["conda-forge", "bioconda"]
platforms = ["linux-64"]

[dependencies]
python = ">=3.13,<3.14"
snakemake-minimal = ">=8.0"
bcftools = ">=1.19"
bedtools = ">=2.31"
htslib = ">=1.19"
samtools = ">=1.19"
pysam = ">=0.22"
pandas = ">=2.1"
apptainer = ">=1.3"
ruff = ">=0.15.0,<0.16"
mypy = ">=1.19.1,<2"
tokei = ">=14.0.0,<15"

[pypi-dependencies]
sqlalchemy = ">=2.0.25"
pyyaml = ">=6.0"
requests = ">=2.31.0"
pytest = ">=7.4.0"
bandit = ">=1.7.0"
pip-audit = ">=2.6.0"
semgrep = ">=1.50.0"
scipy = ">=1.11.0"
jinja2 = ">=3.1.0"
mkdocs = ">=1.6.0"
mkdocs-material = ">=9.5.0"

[tasks]
run = { cmd = "snakemake --cores all --configfile config/config.yaml --use-apptainer" }
dry-run = { cmd = "snakemake --cores all --configfile config/config.yaml -n" }
test = { cmd = "pytest tests/ -v" }
lint = { cmd = "ruff check scripts/ tests/" }
format = { cmd = "ruff format scripts/ tests/" }
typecheck = { cmd = "mypy scripts/ tests/" }
security = { cmd = "bandit -r scripts/" }
audit = { cmd = "pip-audit" }
semgrep = { cmd = "semgrep --config=auto ." }
docs-build = { cmd = "mkdocs build" }
docs-serve = { cmd = "mkdocs serve" }
